// This file was auto-generated by the card stub generator.
// Card effects were implemented by an agent.
// If you have any questions or feedback, reach out to @C4 in the discord.

import { PokemonCard } from '../../game/store/card/pokemon-card';
import { Stage, CardType } from '../../game/store/card/card-types';
import { PowerType, StoreLike, State } from '../../game';
import { Effect } from '../../game/store/effects/effect';
import { WAS_ATTACK_USED } from '../../game/store/prefabs/prefabs';
import { YOUR_OPPPONENTS_ACTIVE_POKEMON_IS_NOW_ASLEEP } from '../../game/store/prefabs/attack-effects';

export class Amoonguss extends PokemonCard {
  public stage: Stage = Stage.STAGE_1;
  public evolvesFrom: string = 'Foongus';
  public cardType: CardType = G;
  public hp: number = 90;
  public weakness = [{ type: R }];
  public retreat = [C, C, C];

  public powers = [  {
    name: 'Surprise Spores',
    powerType: PowerType.ABILITY,
    text: 'During your opponent\'s turn, if this Pokémon is discarded from your hand by an effect of an attack or Ability from your opponent\'s Pokémon, or by an effect of your opponent\'s Item or Supporter cards, discard your opponent\'s hand.'
  }];

  public attacks = [
    {
      name: 'Hypno Hammer',
      cost: [G, C],
      damage: 50,
      text: 'Your opponent\'s Active Pokémon is now Asleep.'
    }
  ];

  public regulationMark: string = 'F';
  public set: string = 'SIT';
  public setNumber: string = '12';
  public cardImage: string = 'assets/cardback.png';
  public name: string = 'Amoonguss';
  public fullName: string = 'Amoonguss SIT 12';

  public reduceEffect(store: StoreLike, state: State, effect: Effect): State {
    // Ability: Surprise Spores
    // NOTE: This ability triggers when this Pokemon is discarded from hand by an opponent effect.
    // The current engine does not have a hook for tracking when a card is discarded from hand
    // by an opponent's effect, so this ability cannot be implemented at this time.

    // Attack 1: Hypno Hammer
    // Ref: set-silver-tempest/drowzee.ts (YOUR_OPPPONENTS_ACTIVE_POKEMON_IS_NOW_ASLEEP)
    if (WAS_ATTACK_USED(effect, 0, this)) {
      YOUR_OPPPONENTS_ACTIVE_POKEMON_IS_NOW_ASLEEP(store, state, effect);
    }

    return state;
  }
}
